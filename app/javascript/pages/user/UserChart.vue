<script>
import { HorizontalBar } from 'vue-chartjs';
import { ChartDataLabels } from 'chartjs-plugin-datalabels';

export default {
  extends: HorizontalBar,
  plugins: { ChartDataLabels },
  props: {
    datasets: {
      type: Array,
      required: false
    },
    labels: {
      type: Array,
      required: true
    }
  },
  data () {
    return {
      options: {
        scales: {
          xAxes: [{
            ticks: {
              beginAtZero: true,
              stepSize: 5,
              min: 0,
              max: 30
            },
          }],
        }
      }
    }
  },
  mounted() {
    this.renderChart({
      labels: this.labels,
      datasets: [
        {
          label: '１日の合計ポモドーロ数',
          data: this.datasets,
          backgroundColor: "#f25287",
          datalabels: {
            color: 'black',
            anchor: 'center',
            formatter: function(value, context) {
              if (value >= 1) {
              return '合計 ' + (value * 25) + '分'
              }
            }
          }
        }
      ]
    }, this.options)
  }
}
</script>